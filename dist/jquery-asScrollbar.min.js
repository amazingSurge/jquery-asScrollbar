/**
* jQuery asScrollbar
* A jquery plugin that generate a styleable scrollbar.
* Compiled: Thu Sep 22 2016 01:25:36 GMT+0800 (CST)
* @version v0.4.1
* @link https://github.com/amazingSurge/jquery-asScrollbar
* @copyright LGPL-3.0
*/
!function(t,n){if("function"==typeof define&&define.amd)define([],n);else if("undefined"!=typeof exports)n();else{var e={exports:{}};n(),t.jqueryAsScrollbarEs=e.exports}}(this,function(){"use strict";function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},e=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),i={namespace:"asScrollbar",skin:null,handleSelector:null,handleTemplate:'<div class="{{handle}}"></div>',barClass:null,handleClass:null,disabledClass:"is-disabled",draggingClass:"is-dragging",hoveringClass:"is-hovering",direction:"vertical",barLength:null,handleLength:null,minHandleLength:30,maxHandleLength:null,mouseDrag:!0,touchDrag:!0,pointerDrag:!0,clickMove:!0,clickMoveStep:.3,mousewheel:!0,mousewheelSpeed:50,keyboard:!0,useCssTransforms3d:!0,useCssTransforms:!0,useCssTransitions:!0,duration:"500",easing:"ease"},s=function(t,n,e,i){var s=function(t,n){return 1-3*n+3*t},a=function(t,n){return 3*n-6*t},o=function(t){return 3*t},r=function(t,n,e){return((s(n,e)*t+a(n,e))*t+o(n))*t},h=function(t,n,e){return 3*s(n,e)*t*t+2*a(n,e)*t+o(n)},l=function(n){for(var i=n,s=0;s<4;++s){var a=h(i,t,e);if(0===a)return i;var o=r(i,t,e)-n;i-=o/a}return i};return t===n&&e===i?{css:"linear",fn:function(t){return t}}:{css:"cubic-bezier("+t+","+n+","+e+","+i+")",fn:function(t){return r(l(t),n,i)}}};Date.now||(Date.now=function(){return(new Date).getTime()});for(var a=["webkit","moz"],o=0;o<a.length&&!window.requestAnimationFrame;++o){var r=a[o];window.requestAnimationFrame=window[r+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r+"CancelAnimationFrame"]||window[r+"CancelRequestAnimationFrame"]}!/iP(ad|hone|od).*OS (6|7|8)/.test(window.navigator.userAgent)&&window.requestAnimationFrame&&window.cancelAnimationFrame||!function(){var t=0;window.requestAnimationFrame=function(n){var e=c(),i=16,s=Math.max(t+i,e);return setTimeout(function(){n(t=s)},s-e)},window.cancelAnimationFrame=clearTimeout}();var h=function(t){return"string"==typeof t&&t.indexOf("%")!==-1},l=function(t){return parseFloat(t.slice(0,-1)/100,10)},u=function(t){return!(!t||"matrix"!==t.substr(0,6))&&t.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)},c=function(){return"undefined"!=typeof window.performance&&window.performance.now?window.performance.now():Date.now()},d={};!function(t){var n={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},e=["webkit","Moz","O","ms"],i=$("<support>").get(0).style,s={csstransforms:function(){return Boolean(a("transform"))},csstransforms3d:function(){return Boolean(a("perspective"))},csstransitions:function(){return Boolean(a("transition"))},cssanimations:function(){return Boolean(a("animation"))}},a=function(t,n){var s=!1,a=t.charAt(0).toUpperCase()+t.slice(1);return void 0!==i[t]&&(s=t),s||$.each(e,function(t,n){return void 0===i[n+a]||(s="-"+n.toLowerCase()+"-"+a,!1)}),n?s:!!s},o=function(t){return a(t,!0)};s.csstransitions()&&(t.transition=new String(o("transition")),t.transition.end=n.transition.end[t.transition]),s.cssanimations()&&(t.animation=new String(o("animation")),t.animation.end=n.animation.end[t.animation]),s.csstransforms()&&(t.transform=new String(o("transform")),t.transform3d=s.csstransforms3d()),"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch?t.touch=!0:t.touch=!1,window.PointerEvent||window.MSPointerEvent?t.pointer=!0:t.pointer=!1,t.prefixPointerEvent=function(t){var n=9,e=10;return window.MSPointerEvent?"MSPointer"+t.charAt(n).toUpperCase()+t.substr(e):t}}(d);var g="asScrollbar",f=function(){function s(n,e){t(this,s),this.$bar=$(e),n=this.options=$.extend({},i,n||{},this.$bar.data("options")||{}),e.direction=this.options.direction,this.classes={directionClass:n.namespace+"-"+n.direction,barClass:n.barClass?n.barClass:n.namespace,handleClass:n.handleClass?n.handleClass:n.namespace+"-handle"},"vertical"===this.options.direction?this.attributes={axis:"Y",position:"top",length:"height",clientLength:"clientHeight"}:"horizontal"===this.options.direction&&(this.attributes={axis:"X",position:"left",length:"width",clientLength:"clientWidth"}),this._states={},this._drag={time:null,pointer:null},this._frameId=null,this.handlePosition=0,this.easing=s.easing[this.options.easing]||s.easing.ease,this.init()}return e(s,[{key:"init",value:function(){var t=this.options;this.$handle=this.$bar.find(this.options.handleSelector),0===this.$handle.length?this.$handle=$(t.handleTemplate.replace(/\{\{handle\}\}/g,this.classes.handleClass)).appendTo(this.$bar):this.$handle.addClass(this.classes.handleClass),this.$bar.addClass(this.classes.barClass).addClass(this.classes.directionClass).attr("draggable",!1),t.skin&&this.$bar.addClass(t.skin),null!==t.barLength&&this.setBarLength(t.barLength),null!==t.handleLength&&this.setHandleLength(t.handleLength),this.updateLength(),this.bindEvents()}},{key:"trigger",value:function(t){for(var n,e=arguments.length,i=Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];var a=(n=[this]).concat.apply(n,i);this.$bar.trigger(g+"::"+t,a),t=t.replace(/\b\w+\b/g,function(t){return t.substring(0,1).toUpperCase()+t.substring(1)});var o="on"+t;if("function"==typeof this.options[o]){var r;(r=this.options[o]).apply.apply(r,[this].concat(i))}}},{key:"is",value:function(t){return this._states[t]&&this._states[t]>0}},{key:"enter",value:function(t){void 0===this._states[t]&&(this._states[t]=0),this._states[t]++}},{key:"leave",value:function(t){this._states[t]--}},{key:"eventName",value:function(t){if("string"!=typeof t||""===t)return"."+this.options.namespace;t=t.split(" ");for(var n=t.length,e=0;e<n;e++)t[e]=t[e]+"."+this.options.namespace;return t.join(" ")}},{key:"bindEvents",value:function(){var t=this;this.options.mouseDrag&&(this.$handle.on(this.eventName("mousedown"),$.proxy(this.onDragStart,this)),this.$handle.on(this.eventName("dragstart selectstart"),function(){return!1})),this.options.touchDrag&&d.touch&&(this.$handle.on(this.eventName("touchstart"),$.proxy(this.onDragStart,this)),this.$handle.on(this.eventName("touchcancel"),$.proxy(this.onDragEnd,this))),this.options.pointerDrag&&d.pointer&&(this.$handle.on(this.eventName(d.prefixPointerEvent("pointerdown")),$.proxy(this.onDragStart,this)),this.$handle.on(this.eventName(d.prefixPointerEvent("pointercancel")),$.proxy(this.onDragEnd,this))),this.options.clickMove&&this.$bar.on(this.eventName("mousedown"),$.proxy(this.onClick,this)),this.options.mousewheel&&this.$bar.on(this.eventName("mousewheel"),function(n,e){var i=t.getHandlePosition();return i<=0&&e>0||(i>=t.barLength&&e<0||(i-=t.options.mousewheelSpeed*e,t.move(i,!0),!1))}),this.$bar.on(this.eventName("mouseenter"),function(){t.$bar.addClass(t.options.hoveringClass),t.enter("hovering"),t.trigger("hover")}),this.$bar.on(this.eventName("mouseleave"),function(){t.$bar.removeClass(t.options.hoveringClass),t.is("hovering")&&(t.leave("hovering"),t.trigger("hovered"))}),this.options.keyboard&&$(document).on(this.eventName("keydown"),function(n){if((!n.isDefaultPrevented||!n.isDefaultPrevented())&&t.is("hovering")){for(var e=document.activeElement;e.shadowRoot;)e=e.shadowRoot.activeElement;if(!$(e).is(":input,select,option,[contenteditable]")){var i=0,s=null,a=40,o=35,r=36,h=37,l=34,u=33,c=39,d=32,g=38,f=63233,m=63275,p=63273,v=63234,b=63277,y=63276,w=63235,k=63232;switch(n.which){case h:case k:i=-30;break;case g:case f:i=-30;break;case c:case v:i=30;break;case a:case w:i=30;break;case u:case y:i=-90;break;case d:case l:case b:i=-90;break;case o:case m:s="100%";break;case r:case p:s=0;break;default:return}(i||null!==s)&&(i?t.moveBy(i,!0):null!==s&&t.moveTo(s,!0),n.preventDefault())}}})}},{key:"onClick",value:function(t){var n=3;if(t.which!==n&&t.target!==this.$handle[0]){this._drag.time=(new Date).getTime(),this._drag.pointer=this.pointer(t);var e=this.$handle.offset(),i=this.distance({x:e.left,y:e.top},this._drag.pointer),s=1;i>0?i-=this.handleLength:(i=Math.abs(i),s=-1),i>this.barLength*this.options.clickMoveStep&&(i=this.barLength*this.options.clickMoveStep),this.moveBy(s*i,!0)}}},{key:"onDragStart",value:function(t){var n=this,e=3;if(t.which!==e){this.$bar.addClass(this.options.draggingClass),this._drag.time=(new Date).getTime(),this._drag.pointer=this.pointer(t);var i=function(){n.enter("dragging"),n.trigger("drag")};this.options.mouseDrag&&($(document).on(this.eventName("mouseup"),$.proxy(this.onDragEnd,this)),$(document).one(this.eventName("mousemove"),$.proxy(function(){$(document).on(n.eventName("mousemove"),$.proxy(n.onDragMove,n)),i()},this))),this.options.touchDrag&&d.touch&&($(document).on(this.eventName("touchend"),$.proxy(this.onDragEnd,this)),$(document).one(this.eventName("touchmove"),$.proxy(function(){$(document).on(n.eventName("touchmove"),$.proxy(n.onDragMove,n)),i()},this))),this.options.pointerDrag&&d.pointer&&($(document).on(this.eventName(d.prefixPointerEvent("pointerup")),$.proxy(this.onDragEnd,this)),$(document).one(this.eventName(d.prefixPointerEvent("pointermove")),$.proxy(function(){$(document).on(n.eventName(d.prefixPointerEvent("pointermove")),$.proxy(n.onDragMove,n)),i()},this))),$(document).on(this.eventName("blur"),$.proxy(this.onDragEnd,this))}}},{key:"onDragMove",value:function(t){var n=this.distance(this._drag.pointer,this.pointer(t));this.is("dragging")&&(t.preventDefault(),this.moveBy(n,!0))}},{key:"onDragEnd",value:function(){$(document).off(this.eventName("mousemove mouseup touchmove touchend pointermove pointerup MSPointerMove MSPointerUp blur")),this.$bar.removeClass(this.options.draggingClass),this.handlePosition=this.getHandlePosition(),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))}},{key:"pointer",value:function(t){var n={x:null,y:null};return t=t.originalEvent||t||window.event,t=t.touches&&t.touches.length?t.touches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,t.pageX?(n.x=t.pageX,n.y=t.pageY):(n.x=t.clientX,n.y=t.clientY),n}},{key:"distance",value:function(t,n){return"vertical"===this.options.direction?n.y-t.y:n.x-t.x}},{key:"setBarLength",value:function(t,n){"undefined"!=typeof t&&this.$bar.css(this.attributes.length,t),n!==!1&&this.updateLength()}},{key:"setHandleLength",value:function(t,n){"undefined"!=typeof t&&(t<this.options.minHandleLength?t=this.options.minHandleLength:this.options.maxHandleLength&&t>this.options.maxHandleLength&&(t=this.options.maxHandleLength),this.$handle.css(this.attributes.length,t),n!==!1&&this.updateLength(t))}},{key:"updateLength",value:function(t,n){"undefined"!=typeof t?this.handleLength=t:this.handleLength=this.getHandleLenght(),"undefined"!=typeof n?this.barLength=n:this.barLength=this.getBarLength()}},{key:"getBarLength",value:function(){return this.$bar[0][this.attributes.clientLength]}},{key:"getHandleLenght",value:function(){return this.$handle[0][this.attributes.clientLength]}},{key:"getHandlePosition",value:function(){var t=void 0;if(this.options.useCssTransforms&&d.transform){if(t=u(this.$handle.css(d.transform)),!t)return 0;t="X"===this.attributes.axis?t[12]||t[4]:t[13]||t[5]}else t=this.$handle.css(this.attributes.position);return parseFloat(t.replace("px",""))}},{key:"makeHandlePositionStyle",value:function(t){var n=void 0,e="0",i="0";this.options.useCssTransforms&&d.transform?("X"===this.attributes.axis?e=t+"px":i=t+"px",n=d.transform.toString(),t=this.options.useCssTransforms3d&&d.transform3d?"translate3d("+e+","+i+",0)":"translate("+e+","+i+")"):n=this.attributes.position;var s={};return s[n]=t,s}},{key:"setHandlePosition",value:function(t){var n=this.makeHandlePositionStyle(t);this.$handle.css(n),this.is("dragging")||(this.handlePosition=parseFloat(t))}},{key:"moveTo",value:function(t,e,i){var s="undefined"==typeof t?"undefined":n(t);"string"===s&&(h(t)&&(t=l(t)*(this.barLength-this.handleLength)),t=parseFloat(t),s="number"),"number"===s&&this.move(t,e,i)}},{key:"moveBy",value:function(t,e,i){var s="undefined"==typeof t?"undefined":n(t);"string"===s&&(h(t)&&(t=l(t)*(this.barLength-this.handleLength)),t=parseFloat(t),s="number"),"number"===s&&this.move(this.handlePosition+t,e,i)}},{key:"move",value:function(t,n,e){"number"!=typeof t||this.is("disabled")||(t<0?t=0:t+this.handleLength>this.barLength&&(t=this.barLength-this.handleLength),this.is("dragging")||e===!0?(this.setHandlePosition(t),n&&this.trigger("change",t/(this.barLength-this.handleLength))):this.doMove(t,this.options.duration,this.options.easing,n))}},{key:"doMove",value:function(t,n,e,i){var s=this,a=void 0;this.enter("moving"),n=n?n:this.options.duration,e=e?e:this.options.easing;var o=this.makeHandlePositionStyle(t);for(a in o)if({}.hasOwnProperty.call(o,a))break;this.options.useCssTransitions&&d.transition?(this.enter("transition"),this.prepareTransition(a,n,e),this.$handle.one(d.transition.end,function(){s.$handle.css(d.transition,""),i&&s.trigger("change",t/(s.barLength-s.handleLength)),s.leave("transition"),s.leave("moving")}),this.setHandlePosition(t)):!function(){s.enter("animating");var n=c(),e=s.getHandlePosition(),a=t,o=function t(o){var r=(o-n)/s.options.duration;r>1&&(r=1),r=s.easing.fn(r);var h=10,l=parseFloat(e+r*(a-e),h);s.setHandlePosition(l),i&&s.trigger("change",l/(s.barLength-s.handleLength)),1===r?(window.cancelAnimationFrame(s._frameId),s._frameId=null,s.leave("animating"),s.leave("moving")):s._frameId=window.requestAnimationFrame(t)};s._frameId=window.requestAnimationFrame(o)}()}},{key:"prepareTransition",value:function(t,n,e,i){var s=[];t&&s.push(t),n&&($.isNumeric(n)&&(n+="ms"),s.push(n)),e?s.push(e):s.push(this.easing.css),i&&s.push(i),this.$handle.css(d.transition,s.join(" "))}},{key:"enable",value:function(){this._states.disabled=0,this.$bar.removeClass(this.options.disabledClass)}},{key:"disable",value:function(){this._states.disabled=1,this.$bar.addClass(this.options.disabledClass)}},{key:"destory",value:function(){this.$bar.on(this.eventName())}}],[{key:"setDefaults",value:function(t){$.extend(i,$.isPlainObject(t)&&t)}}]),s}();$.extend(f.easing={},{ease:s(.25,.1,.25,1),linear:s(0,0,1,1),"ease-in":s(.42,0,1,1),"ease-out":s(0,0,.58,1),"ease-in-out":s(.42,0,.58,1)});var m="asScrollbar",p=$.fn.asScrollbar;$.fn.asScrollbar=function(t){for(var n=arguments.length,e=Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];return"string"==typeof t?this.each(function(){var n=$(this).data(m);return!!n&&(!(!$.isFunction(n[t])||"_"===t.charAt(0))&&n[t].apply(n,e))}):this.each(function(){$(this).data(m)||$(this).data(m,new f(t,this))})},$.fn.asScrollbar.Constructor=f,$.fn.asScrollbar.setDefaults=f.setDefaults,$.fn.asScrollbar.noConflict=function(){return $.fn.asScrollbar=p,this}});